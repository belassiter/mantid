.game-board {
  flex: 1;
  padding: 2rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.game-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  padding: 1rem 2rem;
  border-radius: 12px;
  margin-bottom: 2rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.game-header h2 {
  margin: 0;
  color: #667eea;
  flex: 1;
}

.turn-display {
  flex: 1;
  text-align: center;
  font-size: 1.1rem;
  font-weight: 600;
  color: #333;
}

.turn-display .winner-text {
  color: #16a34a;
  font-size: 1.2rem;
}

.turn-display .bot-label {
  color: #999;
  font-size: 0.9rem;
  font-weight: normal;
}

.game-info {
  flex: 1;
  display: flex;
  gap: 2rem;
  justify-content: flex-end;
  font-weight: 600;
  color: #666;
}

.draw-pile-section {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 2rem;
}

.draw-pile {
  background: white;
  padding: 1rem 2rem 2rem 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  min-height: 290px;
  min-width: 250px;
}

.cards-left-counter {
  margin: 0 0 0.5rem 0;
  font-weight: 700;
  font-size: 1.1rem;
  color: #333;
  min-height: 1.5rem;
}

.color-hints {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1rem;
}

.empty-deck {
  font-size: 1.5rem;
  color: #999;
  padding: 3rem;
}

/* Card Flip Animation */
.card-flip-container {
  perspective: 1000px;
  position: relative;
  display: inline-block;
  /* Ensure the flip container creates a stacking context above other
     UI elements used during animations. This helps keep flip overlays
     and animated cards visible above nearby content. */
  z-index: 9000;
}

.card-flip-container > *:not(:first-child) {
  position: absolute;
  top: 0;
  left: 0;
}

/* Temporary debug: show both top and next card stacked exactly on top of each
  other (100% overlap) so the right slot is directly underneath the left
  slot. This makes it easy to verify perfect alignment between top and next
  card during development. */
.dual-draw-compare {
  display: flex;
  align-items: flex-start;
  gap: 0;
  white-space: nowrap; /* avoid wrapping into multiple rows */
}
.dual-draw-compare .compare-card {
  /* Match the real `.card.large` width so the compare slot doesn't add extra
     horizontal space. Keep box-sizing and no padding so the slot equals the
     rendered card width. */
  flex: 0 0 100px; /* match `.card.large { width: 100px }` */
  max-width: 100px;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}
.dual-draw-compare .compare-card.left {
  z-index: 2; /* left (top card) rendered above the right */
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}
.dual-draw-compare .compare-card.right {
  margin-left: -100px; /* overlap 100% of the 100px slot so the cards align */
  z-index: 1;
  opacity: 0.95;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Force card sizing inside the debug compare to match real card metrics
   and avoid any container padding/margin that can produce a larger box */
/* (debug sizing overrides removed â€” revert to normal Card styles) */

.card-flip-inner {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  /* Place the flipping inner above the base card within the container */
  z-index: 9001;
  position: relative;
}

/* First-half animation: 0 -> 90deg. Duration controlled by --flip-half-ms */
.card-flip-inner.flipping-half1 {
  animation-name: flipHalf1;
  animation-duration: var(--flip-half-ms, 1300ms);
  animation-timing-function: ease-in-out;
  animation-fill-mode: forwards;
}

/* Second-half animation: 90deg -> 180deg */
.card-flip-inner.flipping-half2 {
  animation-name: flipHalf2;
  animation-duration: var(--flip-half-ms, 1300ms);
  animation-timing-function: ease-in-out;
  animation-fill-mode: forwards;
}

/* Held state during hold/fade where front remains visible and overlay may fade */
.card-flip-inner.flip-held {
  transform: rotateY(180deg);
}

@keyframes flipHalf1 {
  from { transform: rotateY(0deg); }
  to   { transform: rotateY(90deg); }
}

@keyframes flipHalf2 {
  from { transform: rotateY(90deg); }
  to   { transform: rotateY(180deg); }
}

.card-flip-back,
.card-flip-front {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.card-flip-back {
  transform: rotateY(0deg);
}

.card-flip-front {
  transform: rotateY(180deg);
}

/* Ensure the inner Card components inside the flip faces do not show their
   backfaces and are not affected by hover transforms while the overlay is
   animating. This prevents mirrored/backward text and accidental hover
   translations during the flip. */
.card-flip-back .card,
.card-flip-front .card {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform-style: preserve-3d;
  pointer-events: none; /* disable hover effects while overlay active */
}

.card-flip-inner .card:hover {
  transform: none; /* suppress hover translate while flipping */
}

/* During the first-half of the flip we want the underlying base card
   (next card) to be visible instead of the overlay's back face (which
   represents the top card back). Hide the overlay back during half1 so
   the next card shows through. */
.card-flip-inner.flipping-half1 .card-flip-back {
  /* TEMPORARY: For inspection we make the overlay back visible during
     the first-half so the top-card back rotation is visible. This hides
     the next-card reveal and is intended for debugging only. Revert
     this rule to restore the reveal-under behavior. */
  visibility: visible;
  opacity: 1;
  pointer-events: none; /* keep overlay non-interactive during flip */
}

/* Ensure the front face is visible during half2/held */
.card-flip-inner.flipping-half2 .card-flip-front,
.card-flip-inner.flip-held .card-flip-front {
  visibility: visible;
  opacity: 1;
}

/* During the second-half and the held/fade phase we must ensure the
   overlay back is hidden so the fade only affects the front face. This
   prevents a brief flash of the back face while the overlay fades out. */
.card-flip-inner.flipping-half2 .card-flip-back,
.card-flip-inner.flip-held .card-flip-back {
  visibility: hidden;
  opacity: 0;
}

/* Smooth front-face opacity transitions so the fade looks consistent */
.card-flip-front {
  transition: opacity 400ms ease-out;
}

/* Moving Card Animation */
.moving-card {
  position: fixed;
  top: var(--start-y);
  left: var(--start-x);
  transform: translate(-50%, -50%);
  /* Put moving cards on top of most UI elements */
  z-index: 10050;
  pointer-events: none;
  animation: moveToTank 0.8s ease-in-out forwards;
}

@keyframes moveToTank {
  0% {
    top: var(--start-y);
    left: var(--start-x);
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    top: var(--end-y);
    left: var(--end-x);
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
}

.action-buttons {
  display: flex;
  flex-direction: row;
  gap: 1rem;
  margin-top: 0.5rem;
  transition: opacity 0.3s ease-out;
}

.action-buttons.fading-out {
  opacity: 0;
}

.btn-score {
  background: #48bb78;
  color: white;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.btn-score:hover:not(:disabled) {
  background: #38a169;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
}

.btn-score:disabled {
  background: #d1d5db;
  color: #9ca3af;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: not-allowed;
}

.btn-steal {
  background: #ed8936;
  color: white;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.btn-steal:hover:not(:disabled) {
  background: #dd6b20;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
}

.btn-steal:disabled {
  background: #d1d5db;
  color: #9ca3af;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: not-allowed;
}

.players-area {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.last-action {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.last-action .success {
  color: #48bb78;
  font-weight: bold;
}

.last-action .failure {
  color: #f56565;
  font-weight: bold;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  background: white;
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  max-width: 500px;
  width: 90%;
}

.modal h3 {
  margin: 0 0 1.5rem;
  color: #333;
}

.target-selection {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.target-button {
  padding: 1rem;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  background: white;
  cursor: pointer;
  transition: all 0.3s;
  text-align: left;
}

.target-button:hover {
  border-color: #667eea;
  background: #f7fafc;
  transform: translateX(4px);
}

.target-name {
  font-weight: 700;
  font-size: 1.1rem;
  color: #333;
  margin-bottom: 0.5rem;
}

.target-info {
  display: flex;
  gap: 1rem;
  font-size: 0.9rem;
  color: #666;
}

.game-over {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.winner-announcement {
  background: white;
  padding: 4rem;
  border-radius: 24px;
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.2);
  text-align: center;
  max-width: 600px;
  width: 90%;
}

.winner-announcement h1 {
  font-size: clamp(1.5rem, 5vw, 3rem);
  margin: 0 0 1rem;
  color: #667eea;
  animation: bounce 1s ease infinite;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.winner-announcement .winning-score {
  font-size: 1.5rem;
  color: #666;
  margin: 0 0 2rem;
}

.final-scores {
  margin: 2rem 0;
  padding-top: 2rem;
  border-top: 2px solid #e0e0e0;
}

.final-scores h3 {
  font-size: 1.5rem;
  margin: 0 0 1.5rem;
  color: #333;
}

.scores-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 2rem;
}

/* Bot name colors by difficulty */
.bot-name-easy {
  color: #059669 !important;
}

.bot-name-medium {
  color: #d97706 !important;
}

.bot-name-hard {
  color: #dc2626 !important;
}

.score-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 12px;
  transition: all 0.3s;
}

.score-item.winner {
  background: linear-gradient(135deg, #667eea20, #764ba220);
  border: 2px solid #667eea;
  font-weight: 700;
}

.score-item .rank {
  font-size: 1.2rem;
  font-weight: 700;
  color: #667eea;
  min-width: 40px;
}

.score-item .player-name {
  flex: 1;
  text-align: left;
  font-size: 1.1rem;
  color: #333;
}

.score-item .score {
  font-weight: 600;
  color: #666;
  font-size: 1rem;
}

.score-item.winner .score {
  color: #667eea;
}


@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* Scoring Cards Animation */
.scoring-card {
  position: fixed;
  top: var(--start-y);
  left: var(--start-x);
  transform: translate(-50%, -50%);
  z-index: 1000;
  pointer-events: none;
  animation: scoreToCorner 1s ease-in-out forwards;
}

@keyframes scoreToCorner {
  0% {
    top: var(--start-y);
    left: var(--start-x);
    transform: translate(-50%, -50%) scale(1) rotateY(180deg);
    opacity: 1;
  }
  100% {
    top: var(--end-y);
    left: var(--end-x);
    transform: translate(-50%, -50%) scale(1) rotateY(180deg);
    opacity: 0;
  }
}
